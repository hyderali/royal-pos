<div class="hidden-print">
  {{#if this.isSales}}
    <div class="form-group">
      <div class="col-md-3">Sales Person</div>
      <div class="col-md-9">
        <PowerSelect @searchEnabled={{true}} @selected={{@model.salesperson}} @options={{this.session.salespersons}} @onChange={{this.selectSP}} @searchField="salesperson_name" as |salesperson|>
          {{salesperson.salesperson_name}}
        </PowerSelect>
      </div>
    </div>
    <div class="form-group">
      <div class="col-md-3">Phone Number</div>
      <div class="col-md-9">
        <Input class="form-control" @value={{@model.phone_number}} data-test-phone-number />
      </div>
    </div><br><br>
  {{/if}}
  <table class="table table-bordered">
    <thead>
      <tr>
        {{!-- template-lint-disable no-inline-styles --}}
        <th style="width:5%">S.No</th>
        <th style="width:15%">SKU</th>
        <th style="width:15%">Name</th>
        <th style="width:14%">Qty</th>
        <th style="width:14%">Rate</th>
        <th style="width:14%">Discount</th>
        <th style="width:14%">Total</th>
        <th style="width:9%"></th>
      </tr>
    </thead>
    <tbody>
      {{#each @model.line_items as |lineItem index|}}
        <tr data-test-line-item>
          <td>{{get-index index}}</td>
          <td>{{lineItem.sku}}</td>
          <td>
            {{#if lineItem.isCustom}}
              <PowerSelect @searchEnabled={{true}} @selected={{lineItem.description}} @options={{this.customItems}} @onChange={{fn this.selectCustomItem lineItem}} @autofocus={{lineItem.canFocus}} as |customItem|>
                {{customItem}}
              </PowerSelect>
            {{else}}
              <span data-test-item-name>{{lineItem.name}}</span>
            {{/if}}
          </td>
          <td><Input class="form-control" @value={{lineItem.quantity}} disabled={{@model.isSaving}} data-test-item-quantity /></td>
          <td>
            {{#if lineItem.isCustom}}
              <Input class="form-control" @value={{lineItem.rate}} disabled={{@model.isSaving}} data-test-item-rate />
            {{else}}
              <span data-test-item-rate>{{lineItem.rate}}</span>
            {{/if}}
          </td>
          <td>
            <PowerSelect @searchEnabled={{true}} @selected={{lineItem.discount}} @options={{this.discounts}} @onChange={{fn this.discountChanged lineItem}} as |discount|>
              {{discount}}
            </PowerSelect>
            {{#if lineItem.discount}}
              {{lineItem.discount_amount}}
            {{/if}}
          </td>
          <td>{{lineItem.total}}</td>
          <td><button type="button" class="btn btn-danger pull-right" data-test-remove-item {{on "click" (fn this.removeLineItem lineItem)}}>Delete</button></td>
        </tr>
      {{/each}}
      <tr>
        <td></td>
        <td><Input class="form-control" @value={{this.id}} @enter={{this.itemChanged}} data-test-barcode-input {{autofocus}} /></td>
        <td><button type="button" class="btn btn-primary" data-test-add-item-button {{on "click" this.itemChanged}}>Add Item</button></td>
        <td><button type="button" class="btn btn-default" data-test-add-temp-item {{on "click" this.addTempItem}}>Add Temp Item</button></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td colspan="3" class="text-right">Subtotal</td>
        <td colspan="3">{{@model.qtyTotal}}</td>
        <td>{{@model.subtotal}}</td>
        <td></td>
      </tr>
      <tr>
        <td colspan="6" class="text-right">Discount</td>
        <td>{{@model.discount}}</td>
        <td></td>
      </tr>
      <tr>
        <td colspan="6" class="text-right">Total</td>
        <td>{{@model.total}}</td>
        <td></td>
      </tr>
    </tfoot>
  </table>
  <div class="btn-toolbar pull-right">
    <div class="btn-group">
      <button type="button" disabled={{@model.isSaving}} class="btn btn-default" data-test-save-button {{on "click" (fn this.saveAndPrint true)}}>Save & New</button>
    </div>
    <div class="btn-group">
      <button type="button" disabled={{@model.isSaving}} class="btn btn-primary" {{on "click" (fn this.saveAndPrint false)}}>Save & Print</button>
    </div>
    <div class="btn-group">
      <button type="button" class="btn btn-default" {{on "click" this.newSale}}>New Sale</button>
    </div>
  </div>
</div>
